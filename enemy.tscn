[gd_scene load_steps=32 format=3 uid="uid://dvgf16mg712qb"]

[ext_resource type="Script" path="res://scripts/enemy.gd" id="1_wofkh"]
[ext_resource type="Texture2D" uid="uid://dlrk5ii3fix65" path="res://icon.svg" id="2_kfs2v"]
[ext_resource type="Texture2D" uid="uid://ba4y2312brady" path="res://LightCone.png" id="3_57ff0"]
[ext_resource type="Texture2D" uid="uid://cdj5cqc5loc1l" path="res://biped_robot/robot_orange.png" id="3_sliq8"]

[sub_resource type="CircleShape2D" id="CircleShape2D_oyyr8"]
radius = 62.3939

[sub_resource type="AtlasTexture" id="AtlasTexture_d45w7"]
atlas = ExtResource("3_sliq8")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_syaw6"]
atlas = ExtResource("3_sliq8")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_12hm4"]
atlas = ExtResource("3_sliq8")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3d6ao"]
atlas = ExtResource("3_sliq8")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_bs7bg"]
atlas = ExtResource("3_sliq8")
region = Rect2(128, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_kawtp"]
atlas = ExtResource("3_sliq8")
region = Rect2(160, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_yallu"]
atlas = ExtResource("3_sliq8")
region = Rect2(0, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2r124"]
atlas = ExtResource("3_sliq8")
region = Rect2(32, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_882i5"]
atlas = ExtResource("3_sliq8")
region = Rect2(64, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_6a7pw"]
atlas = ExtResource("3_sliq8")
region = Rect2(96, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_towp5"]
atlas = ExtResource("3_sliq8")
region = Rect2(128, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5ics4"]
atlas = ExtResource("3_sliq8")
region = Rect2(160, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_l46nl"]
atlas = ExtResource("3_sliq8")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_qe45y"]
atlas = ExtResource("3_sliq8")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jt2mq"]
atlas = ExtResource("3_sliq8")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1g1ae"]
atlas = ExtResource("3_sliq8")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3b1p1"]
atlas = ExtResource("3_sliq8")
region = Rect2(128, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_c7m1t"]
atlas = ExtResource("3_sliq8")
region = Rect2(160, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2m78d"]
atlas = ExtResource("3_sliq8")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_863ms"]
atlas = ExtResource("3_sliq8")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8pqhx"]
atlas = ExtResource("3_sliq8")
region = Rect2(64, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_j0shg"]
atlas = ExtResource("3_sliq8")
region = Rect2(96, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_l2h2k"]
atlas = ExtResource("3_sliq8")
region = Rect2(128, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_m4iol"]
atlas = ExtResource("3_sliq8")
region = Rect2(160, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_abhqh"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_d45w7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_syaw6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_12hm4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3d6ao")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bs7bg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kawtp")
}],
"loop": true,
"name": &"down",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yallu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2r124")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_882i5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6a7pw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_towp5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5ics4")
}],
"loop": true,
"name": &"left",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_l46nl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qe45y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jt2mq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1g1ae")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3b1p1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c7m1t")
}],
"loop": true,
"name": &"right",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2m78d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_863ms")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8pqhx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j0shg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l2h2k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m4iol")
}],
"loop": true,
"name": &"walk",
"speed": 10.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hetd4"]
size = Vector2(714, 628)

[node name="Enemy" type="CharacterBody2D"]
position = Vector2(0, 16)
scale = Vector2(0.5, 0.5)
collision_layer = 2
collision_mask = 5
motion_mode = 1
wall_min_slide_angle = 0.0
script = ExtResource("1_wofkh")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(6, -20)
shape = SubResource("CircleShape2D_oyyr8")

[node name="Navigation" type="Node2D" parent="."]

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="Navigation"]
path_desired_distance = 5.0
path_max_distance = 15.0
navigation_layers = 3
avoidance_enabled = true
radius = 150.0
avoidance_layers = 3
debug_path_custom_color = Color(1, 0.0705882, 1, 1)

[node name="recalcTimer" type="Timer" parent="Navigation"]
wait_time = 0.5
autostart = true

[node name="Icon" type="Sprite2D" parent="."]
visible = false
position = Vector2(11, 4)
texture = ExtResource("2_kfs2v")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(8, -36)
scale = Vector2(6.5, 5.5)
sprite_frames = SubResource("SpriteFrames_abhqh")
animation = &"walk"

[node name="aggro" type="Node2D" parent="."]

[node name="Deaggro Range" type="Area2D" parent="aggro"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="aggro/Deaggro Range"]
position = Vector2(9, -18)
scale = Vector2(1.75, 2)
shape = SubResource("RectangleShape2D_hetd4")
debug_color = Color(0.879278, 0.179821, 0.709977, 0.42)

[node name="vision_pivot" type="Node2D" parent="."]

[node name="PointLight2D" type="PointLight2D" parent="vision_pivot"]
position = Vector2(10, -50)
rotation = -3.14159
scale = Vector2(0.150302, 0.156948)
shadow_enabled = true
texture = ExtResource("3_57ff0")
offset = Vector2(72.9275, 1224.86)

[connection signal="timeout" from="Navigation/recalcTimer" to="." method="_on_recalc_timer_timeout"]
[connection signal="area_entered" from="aggro/Deaggro Range" to="." method="_on_deaggro_range_area_entered"]
[connection signal="area_exited" from="aggro/Deaggro Range" to="." method="_on_deaggro_range_area_exited"]
[connection signal="body_entered" from="aggro/Deaggro Range" to="." method="_on_deaggro_range_body_entered"]
[connection signal="body_exited" from="aggro/Deaggro Range" to="." method="_on_deaggro_range_body_exited"]
[connection signal="child_entered_tree" from="aggro/Deaggro Range/CollisionShape2D" to="." method="_on_collision_shape_2d_child_entered_tree"]
